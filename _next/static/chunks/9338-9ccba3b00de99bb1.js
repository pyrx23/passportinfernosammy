"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9338],{36584:function(e,t,s){s.d(t,{X:function(){return WebmVideo}});var r=s(24246);s(27378);let WebmVideo=e=>{let{src:t,fallbackSrc:s,className:a,alt:o}=e;return(0,r.jsxs)("video",{autoPlay:!0,loop:!0,playsInline:!0,className:a,poster:s,children:[(0,r.jsx)("source",{src:t,type:"video/webm"}),(0,r.jsx)("img",{src:s,alt:o})]})}},59338:function(e,t,s){s.r(t),s.d(t,{default:function(){return Welcome}});var r,a,o=s(24246),n=s(27378),l=s(65783),c=s(14935);(r=a||(a={}))[r.SUCCESS=0]="SUCCESS",r[r.IN_PROGRESS=1]="IN_PROGRESS",r[r.NOT_STARTED=2]="NOT_STARTED",r[r.ERROR=3]="ERROR";var i=s(11797),d=s(7728),m=s(62049),u=s(51752),h=s(72710),x=s(39872),p=s(19620),f=s(78880),g=s(36584);let WelcomeWrapper=e=>{let{content:t,children:s}=e;return(0,o.jsxs)("div",{className:"grid grid-rows-[minmax(0,1fr)_min-content_minmax(0,2fr)]",children:[(0,o.jsx)("div",{className:"row-start-1 row-end-4 p-4 text-lg text-color-1 md:row-start-2 md:row-end-3",children:(0,o.jsxs)("div",{className:"flex h-full w-full auto-rows-min flex-col gap-2 md:grid md:grid-cols-2",children:[(0,o.jsxs)("div",{className:"row-start-2 flex flex-col gap-2",children:[(0,o.jsx)("div",{className:"font-heading text-4xl text-color-1 md:text-5xl lg:text-7xl",children:t.header}),(0,o.jsxs)("div",{className:"flex items-center gap-2 text-xl text-color-2 md:text-2xl lg:text-5xl",children:[(0,o.jsx)("img",{className:"h-9 w-9",src:t.subHeaderIconSrc,alt:"Subheader Icon"}),(0,o.jsx)("p",{children:t.subHeader})]})]}),(0,o.jsx)(g.X,{className:"self-center md:col-start-2 md:row-span-5",src:"./assets/onboarding.webm",fallbackSrc:"./assets/onboarding.svg",alt:"Welcome"}),(0,o.jsxs)("div",{className:"flex grow flex-col justify-between gap-4 md:gap-8",children:[(0,o.jsx)("div",{children:s}),(0,o.jsx)(WelcomePageButtons,{...t.buttonsConfig})]})]})}),t.stepsConfig&&(0,o.jsx)(StepIndicator,{...t.stepsConfig,className:"row-start-3 mb-10 hidden self-end justify-self-center md:flex"})]})},StepIndicator=e=>{let{current:t,total:s,className:r}=e;return(0,o.jsx)("div",{className:"flex items-center gap-2 ".concat(r),children:Array.from({length:s},(e,s)=>(0,o.jsxs)("svg",{className:"grid grid-cols-1",width:"18",height:"18",children:[(0,o.jsx)("circle",{r:"9",cx:"9",cy:"9",fill:s+1===t?"rgb(var(--color-background-3))":"transparent",className:"transition-colors duration-1000"}),(0,o.jsx)("circle",{r:"5",cx:"9",cy:"9",fill:"rgb(var(--color-foreground-2))"})]},s))})},WelcomePageButtons=e=>{let{dashboardCustomizationKey:t,onSkip:s,onNext:r,nextButtonText:a,skipButtonText:l}=e,[i,d]=(0,n.useState)(!1),m=(0,c.s0)();return(0,o.jsxs)("div",{className:"grid w-full grid-cols-2 gap-4",children:[(0,o.jsx)(f.s,{"data-testid":"skip-for-now-button",className:"col-span-full row-start-2 md:col-span-1 md:row-start-1",variant:"secondary",isLoading:i,onClick:()=>{d(!0),m("/dashboard".concat(t?"/".concat(t):"")),s(),d(!1)},children:l||"Skip for now"}),(0,o.jsx)(p.z,{"data-testid":"next-button",onClick:r,className:"col-span-full md:col-span-1",children:a||"Next"})]})},WelcomeBack=e=>{let{onOpen:t,handleFetchPossibleEVMStamps:s,resetStampsAndProgressState:r,dashboardCustomizationKey:a}=e,{allPlatforms:l}=(0,n.useContext)(h.oQ),c=(0,x.X)(e=>e.address);return(0,o.jsx)(WelcomeWrapper,{content:{header:"Welcome back to Passport",subHeader:"Privacy-First Verification",subHeaderIconSrc:"./assets/shieldLockIcon.svg",buttonsConfig:{onSkip:()=>{r()},onNext:()=>{t(),s(c,l)},dashboardCustomizationKey:a,nextButtonText:"Refresh my stamps",skipButtonText:"Go to dashboard"}},children:'Passport helps you collect "stamps" that prove your humanity and reputation. You decide what stamps are shown. And your privacy is protected at each step of the way.'})};var b=s(3346),j=s(97821),S=s(34474),v=s(20013),y=s(59957);function classNames(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}function RefreshStampsProgressSteps(e){let{steps:t}=e;return(0,o.jsx)("nav",{"aria-label":"Progress",children:(0,o.jsxs)("ol",{role:"list",className:"overflow-hidden text-color-4",children:[t.map((e,s)=>(0,o.jsxs)("li",{className:classNames(s!==t.length-1?"pb-0":"","relative text-color-4"),children:[e.status===a.SUCCESS?(0,o.jsxs)(o.Fragment,{children:[s!==t.length-1?(0,o.jsx)("div",{className:"absolute left-4 top-8 -ml-px mt-0.5 h-full w-0.5 bg-background-3","aria-hidden":"true"}):null,";",(0,o.jsx)("span",{className:"flex h-0 items-center",children:(0,o.jsx)("span",{className:"relative z-10 flex h-8 w-8 items-center justify-center rounded-full bg-background-2 group-hover:bg-background-3",children:(0,o.jsx)(y,{className:"h-5 w-5 text-color-1","aria-hidden":"true"})})}),(0,o.jsx)("span",{className:"-mt-2 ml-12 flex min-w-0 flex-col",children:(0,o.jsx)("span",{className:"text-sm font-medium text-color-1",children:e.name})})]}):e.status===a.IN_PROGRESS?(0,o.jsxs)(o.Fragment,{children:[s!==t.length-1?(0,o.jsx)("div",{className:"absolute left-4 top-8 -ml-px mt-0.5 h-full w-0.5 bg-foreground-6 text-color-4","aria-hidden":"true"}):null,";",(0,o.jsx)("span",{className:"flex h-0 items-center","aria-hidden":"true",children:(0,o.jsx)("span",{className:"relative z-10 flex h-8 w-8 items-center justify-center rounded-full border-2 border-background-3 bg-foreground",children:(0,o.jsx)("span",{className:"h-2.5 w-2.5 rounded-full bg-background-3"})})}),(0,o.jsx)("span",{className:"-mt-2 ml-12 flex min-w-0 flex-col",children:(0,o.jsx)("span",{className:"text-sm font-medium text-color-2",children:e.name})})]}):(0,o.jsxs)(o.Fragment,{children:[s!==t.length-1?(0,o.jsx)("div",{className:"absolute left-4 top-8 -ml-px mt-0.5 h-full w-0.5 bg-foreground-6 text-color-4","aria-hidden":"true"}):null,";",(0,o.jsx)("span",{className:"flex h-0 items-center text-color-4","aria-hidden":"true",children:(0,o.jsx)("span",{className:"relative z-10 flex h-8 w-8 items-center justify-center rounded-full border-2 border-foreground-6 bg-background text-color-4 group-hover:border-foreground-3",children:(0,o.jsx)("span",{className:"h-2.5 w-2.5 rounded-full bg-transparent group-hover:bg-foreground-3"})})}),(0,o.jsx)("span",{className:"-mt-2 ml-12 flex min-w-0 flex-col",children:(0,o.jsx)("span",{className:"text-sm font-medium text-color-1",children:e.name})})]}),";"]},e.name)),";"]})})}var N=s(21849),w=s(82649),C=s(18700),k=s(7270),P=s(48988),E=s(80630),R=s(75223),T=s(40122),I=s(11348);function RefreshMyStampsSelector(e){let{validPlatformGroups:t,selectedProviders:s,setSelectedProviders:r,platformChecked:a}=e;return(0,o.jsx)(o.Fragment,{children:t.map((e,t)=>(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"my-4 text-sm text-color-2",children:e.name}),(0,o.jsx)("div",{children:e.providers.map((e,t)=>(0,o.jsxs)("div",{"data-testid":"indicator-".concat(e.name),className:"mb-8 flex flex-row items-center justify-between",children:[(0,o.jsx)("div",{className:"mr-10 text-color-1",children:e.title}),(0,o.jsx)("div",{className:"align-right",children:(0,o.jsx)(I.Z,{"data-testid":"checkbox-".concat(e.name),disabled:!a,checked:null==s?void 0:s.includes(e.name),onChange:t=>{r(t?(s||[]).concat(e.name):(s||[]).filter(t=>t!==e.name))}},"".concat(e.title).concat(t))})]},"".concat(e.title).concat(t)))})]},t))})}var M=s(25245),V=s(64877),W=s(1077);let O="relative left-[2px] top-[2px] h-4 w-4 stroke-[3]";var components_Toggle=e=>{let{className:t,...s}=e;return(0,o.jsx)(M.r,{className:"group relative flex h-7 w-12 items-center rounded-full bg-foreground-3 ui-checked:bg-foreground-6 ui-selected:border ".concat(t),...s,children:(0,o.jsxs)("span",{className:"inline-block h-5 w-5 translate-x-1 transform rounded-full bg-foreground transition group-disabled:opacity-25 ui-checked:translate-x-6",children:[(0,o.jsx)(V,{className:"block text-foreground-3 ui-checked:hidden ".concat(O)}),(0,o.jsx)(W,{className:"hidden text-foreground-6 ui-checked:block ".concat(O)})]})})};let RefreshMyStampsModalContentCard=e=>{let{platformGroups:t,currentPlatform:s,selectedProviders:r,setSelectedProviders:a}=e,[l,c]=(0,n.useState)(!1),[i,d]=(0,n.useState)(!1),m=(0,n.useRef)(null),u=(0,n.useMemo)(()=>t.map(e=>{let{providers:t}=e;return null==t?void 0:t.map(e=>{let{name:t}=e;return t})}).flat(2),[t]),h=(0,n.useMemo)(()=>(r||[]).some(e=>(null==u?void 0:u.indexOf(e))!==-1),[r,u]);return(0,n.useEffect)(()=>{if(c(!h),!h&&i){var e;null===(e=m.current)||void 0===e||e.click()}},[h,i]),(0,o.jsx)("div",{className:"border-t border-foreground-6 last:border-b",children:(0,o.jsx)(k.U,{allowToggle:!0,children:(0,o.jsxs)(P.Q,{padding:0,isDisabled:l,border:"none",children:[(0,o.jsxs)("div",{className:"flex items-center gap-4 text-color-1 focus:shadow-none",children:[(0,o.jsx)("div",{className:"grow",children:(0,o.jsxs)(E.K,{paddingY:"16px",paddingX:"0",_focus:{outline:"none"},ref:m,onClick:()=>d(!i),children:[(0,o.jsx)("img",{src:null==s?void 0:s.icon,alt:null==s?void 0:s.name,className:"mr-5 h-11 w-11"}),(0,o.jsx)("p",{className:"text-left",children:null==s?void 0:s.name})]})}),(0,o.jsx)(components_Toggle,{"data-testid":"switch-".concat(null==s?void 0:s.name),checked:h,onChange:e=>{e?a((r||[]).concat(u)):a((r||[]).filter(e=>(null==u?void 0:u.indexOf(e))===-1))}}),(0,o.jsx)(R.X,{className:h?"cursor-pointer":"cursor-not-allowed",fontSize:"28px",onClick:()=>{var e;null===(e=m.current)||void 0===e||e.click()}})]}),(0,o.jsx)(T.H,{borderTop:"1px solid rgb(var(--color-foreground-6))",padding:"0",children:(0,o.jsx)(RefreshMyStampsSelector,{validPlatformGroups:t,selectedProviders:r,setSelectedProviders:a,platformChecked:h})})]})})})},RefreshMyStampsModalContentCardList=e=>{let{validPlatforms:t,selectedProviders:s,setSelectedProviders:r}=e,a=t.map((e,t)=>{let a=(0,C.n)(e.platformProps.platform.path),n=e.groups;return(0,o.jsx)(RefreshMyStampsModalContentCard,{platformGroups:n,currentPlatform:a,selectedProviders:s,setSelectedProviders:r},a?a.name:"undefined-".concat(t))});return(0,o.jsx)(o.Fragment,{children:a})};var _=s(79975),G=s(9027),A=s(54419);let RefreshMyStampsModalContent=e=>{let{onClose:t,validPlatforms:s,resetStampsAndProgressState:r,dashboardCustomizationKey:a}=e,l=(0,x.X)(e=>e.address),{handleAddStamps:i,handleDeleteStamps:d}=(0,n.useContext)(h.oQ),[m,u]=(0,n.useState)(!1),[g,b]=(0,n.useState)(!1),[j,S]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!1),{did:C}=(0,A.sj)(),k=(0,c.s0)(),[P,E]=(0,n.useState)([]),[R,T]=(0,n.useState)([...P]);(0,n.useEffect)(()=>{0!==R.length?b(!0):b(!1)},[R.length]);let handleRefreshSelectedStamps=async()=>{try{u(!0),await handleFetchCredential(R),w.fy.logger.info("Successfully saved Stamp, onboard one step verification",{providers:R}),localStorage.setItem("successfulRefresh","true")}catch(e){w.fy.logger.error("Verification Error, onboard one step verification",{error:e}),localStorage.setItem("successfulRefresh","false")}u(!1),k("/dashboard".concat(a?"/".concat(a):"")),r()},handleFetchCredential=async e=>{try{if(!C)throw Error("No DID found");if(R.length>0){let t=await (0,N.fetchVerifiableCredential)(G.DK,{type:"EVMBulkVerify",types:R,version:"0.0.0",address:l||"",proofs:{},signatureType:G.Em},e=>(0,_.sn)(C,e)),s=(0,_.d4)(R,t.credentials);await d(e),s.length>0&&await i(s);let r=e.filter(e=>!!s.find(t=>{var s,r;return(null==t?void 0:null===(r=t.credential)||void 0===r?void 0:null===(s=r.credentialSubject)||void 0===s?void 0:s.provider)===e}));E([...r]),T([...r])}}catch(e){throw console.log(e),Error()}};return(0,n.useEffect)(()=>{let e=s.map(e=>{let{groups:t}=e;return t.map(e=>{let{providers:t}=e;return t.map(e=>{let{name:t}=e;return t})})}).flat(3);T(e)},[s]),(0,o.jsxs)("div",{className:"flex grow flex-col items-center pb-6",children:[(0,o.jsx)("div",{className:"w-full grow px-4 md:px-8",children:s.length>0?(0,o.jsxs)("div",{className:"flex flex-col text-color-1",children:[(0,o.jsx)("div",{className:"my-4 font-heading text-2xl md:my-6",children:"Stamps Found"}),(0,o.jsxs)("div",{children:[" ",(0,o.jsx)(RefreshMyStampsModalContentCardList,{selectedProviders:R,validPlatforms:s,setSelectedProviders:T})]}),(0,o.jsx)("div",{className:"mt-8 cursor-pointer text-center text-color-2 underline",children:(0,o.jsx)("a",{onClick:()=>S(!j),children:"How is my data stored?"})}),j&&(0,o.jsx)("div",{className:"pt-3 text-justify",children:(0,o.jsx)("p",{children:"The only information in your passport is the Decentralized Identifier (DID) associated with your Ethereum address and the Verifiable Credentials (VCs) issued for each service you connect to your passport. No identifiable details are stored in your passport as we encrypt the account details when creating your VCs. You can inspect the data yourself in the Gitcoin Passport by clicking the </> Passport JSON button in the upper right of the Passport dashboard."})}),(0,o.jsxs)("div",{className:"mt-8 grid grid-cols-2 items-center justify-center gap-6",children:[(0,o.jsx)(p.z,{variant:"secondary",onClick:()=>k("/dashboard".concat(a?"/".concat(a):"")),children:"Cancel"}),(0,o.jsx)(f.s,{onClick:()=>{handleRefreshSelectedStamps()},disabled:!g||m,isLoading:m,children:"Confirm Stamps"})]})]}):(0,o.jsxs)("div",{className:"flex flex-col items-center text-center text-color-1",children:[(0,o.jsx)("div",{className:"mb-6 mt-4 flex h-10 w-10"}),(0,o.jsx)("div",{className:"w-3/4 text-3xl",children:"No New Web3 Stamps Detected"}),(0,o.jsx)("div",{className:"my-20 text-xl text-color-2",children:"We did not find any new Web3 stamps to add to your passport. Completing the actions for a web3 stamp and resubmitting will ensure that stamp is added (for example: Obtain an ENS name, NFT, etc.). Please return to the dashboard and select additional stamps to verify your unique humanity by connecting to external accounts (for example: Gmail, Discord, etc)."}),(0,o.jsx)(p.z,{className:"w-full",onClick:()=>{k("/dashboard".concat(a?"/".concat(a):"")),r()},children:"Explore Stamps"})]})}),(0,o.jsxs)("div",{className:"mb-2 mt-8 flex text-color-1",children:[(0,o.jsx)(I.Z,{"data-testid":"checkbox-onboard-hide",id:"checkbox-onboard-hide",checked:v,onChange:e=>{if(e){let e=Math.floor(Date.now()/1e3);localStorage.setItem("onboardTS",e.toString()),y(!0)}else localStorage.removeItem("onboardTS"),y(!1)}}),(0,o.jsx)("label",{className:"pl-2",htmlFor:"checkbox-onboard-hide",children:"Skip welcome onboarding until stamps expire"})]})]})},RefreshMyStampsModal=e=>{let{isOpen:t,onClose:s,steps:r,validPlatforms:a,resetStampsAndProgressState:n,dashboardCustomizationKey:l}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(b.u_,{isOpen:t,onClose:s,closeOnOverlayClick:!0,scrollBehavior:"outside","datatest-id":"refresh-my-stamps-modal",children:[(0,o.jsx)(j.Z,{bg:"blackAlpha.900"}),(0,o.jsxs)(S.h,{w:"410px",minH:"550px",maxH:"auto",children:[(0,o.jsx)(v.o,{}),a?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(RefreshMyStampsModalContent,{onClose:s,validPlatforms:a,resetStampsAndProgressState:n,dashboardCustomizationKey:l})}):(0,o.jsxs)("div",{className:"p-4 md:p-6",children:[(0,o.jsx)("div",{className:"font-heading text-3xl text-color-1",children:"Searching for Stamps"}),(0,o.jsx)("div",{className:"mt-2 font-alt text-color-2",children:"Give us a moment while we check your account for existing Stamps."}),(0,o.jsx)(RefreshStampsProgressSteps,{steps:r}),(0,o.jsx)("div",{className:"text-center text-color-2",children:"Please do not close the window."})]})]})]})})};var D=s(67589);let InitialWelcome=e=>{let{onBoardFinished:t,dashboardCustomizationKey:s}=e,[r,a]=(0,n.useState)(0),onSkip=()=>{a(0)},l=[{header:"Welcome to Gitcoin Passport!",subHeader:"Privacy-First Verification",subHeaderIconSrc:"./assets/shieldLockIcon.svg",body:'Passport helps you collect "stamps" that prove your humanity and reputation. You decide what stamps are shown. And your privacy is protected at each step of the way.',stepsConfig:{current:1,total:3},buttonsConfig:{onSkip,onNext:()=>a(1),dashboardCustomizationKey:s}},{header:"Introducing Passport Scoring",subHeader:"Your Unique Humanity Score",subHeaderIconSrc:"./assets/hexagonIcon.svg",body:"Your Unique Humanity Score represents your trustworthiness to web3 projects. Increase your score to unlock higher quality experiences.",stepsConfig:{current:2,total:3},buttonsConfig:{onSkip,onNext:()=>a(2),dashboardCustomizationKey:s}},{header:"Get Started",subHeader:"Verification Steps",subHeaderIconSrc:"./assets/lockIcon.svg",body:(0,o.jsxs)("ol",{className:"list-none",children:[(0,o.jsx)(ListItem,{number:1,children:"Verify your web3 stamps now with one-click verification."}),(0,o.jsx)(ListItem,{number:2,children:"Verify any remaining web2 stamps."}),(0,o.jsx)(ListItem,{number:3,children:"See your Unique Humanity Score increase."})]}),stepsConfig:{current:3,total:3},buttonsConfig:{onSkip,onNext:()=>t(),dashboardCustomizationKey:s,nextButtonText:"Verify stamps"}}],c=l[r],i=c.body;return(0,o.jsx)(WelcomeWrapper,{content:c,children:i})},ListItem=e=>{let{children:t,number:s}=e;return(0,o.jsxs)("li",{className:"flex items-start gap-2 py-1",children:[(0,o.jsx)(ListMarker,{number:s}),(0,o.jsx)("div",{className:"leading-6",children:t})]})},ListMarker=e=>{let{number:t}=e;return(0,o.jsx)("div",{className:"h-6 w-6",children:(0,o.jsxs)("svg",{width:"24",height:"25",className:"col-start-1 row-start-1",children:[(0,o.jsx)("defs",{children:(0,o.jsxs)("linearGradient",{id:"Gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[(0,o.jsx)("stop",{offset:"0%",stopColor:"rgb(var(--color-foreground))"}),(0,o.jsx)("stop",{offset:"100%",stopColor:"rgb(var(--color-foreground-2))"})]})}),(0,o.jsx)("circle",{r:"11",cx:"12",cy:"12",stroke:"url(#Gradient)",strokeWidth:"1"}),(0,o.jsx)("text",{x:"50%",y:"55%",textAnchor:"middle",fill:"white",dominantBaseline:"middle",children:t})]})})};var components_LoadingScreen=()=>(0,o.jsxs)("div",{className:"flex h-1/2 flex-col place-content-center text-center text-3xl text-color-2",children:["Loading...",(0,o.jsx)("img",{className:"mt-2 h-12 animate-bounce",src:"/assets/passportLogoWhite.svg",alt:"Gitcoin Logo"})]}),F=s(14206),H=s.n(F);let getTypesToCheck=(e,t)=>{let s=t&&t.stamps.map(e=>e.provider),r=e.map(e=>{let{platFormGroupSpec:t}=e;return t.map(e=>{let{providers:t}=e;return t.map(e=>{let{name:t}=e;return t})})}).flat(2);return s?r.filter(e=>!s.includes(e)):r},filterUndefined=e=>!!e,fetchPossibleEVMStamps=async(e,t,s)=>{let r;let a=Array.from(t.values()),o=a.filter(e=>{let{platform:t}=e;return t.isEVM}),n={type:"bulk",types:getTypesToCheck(o,s),address:e,version:"0.0.0"};try{r=await H().post("".concat(G.DK.replace(/\/*?$/,""),"/v").concat(n.version,"/check"),{payload:n})}catch(e){return console.error(e),[]}let l=r.data.reduce((e,t)=>{let{type:s,valid:r}=t;return r?[...e,s]:e},[]),getValidGroupProviders=e=>e.providers.reduce((e,t)=>{let{name:s,title:r}=t;return l.includes(s)?[...e,{name:s,title:r}]:e},[]),getValidPlatformGroups=e=>e.platFormGroupSpec.map(e=>{let t=getValidGroupProviders(e);if(0!==t.length)return{name:e.platformGroup,providers:t}}).filter(filterUndefined);return o.map(e=>{let t=getValidPlatformGroups(e);if(0!==t.length)return{groups:t,platformProps:e}}).filter(filterUndefined)};var L=s(29468);let getStepDelay=()=>Math.floor(751*Math.random()+50);function Welcome(){let{isOpen:e,onOpen:t,onClose:s}=(0,D.q)(),{passport:r,allPlatforms:p,isLoadingPassport:f}=(0,n.useContext)(h.oQ),{dbAccessTokenStatus:g}=(0,A.sj)(),b=(0,x.X)(e=>e.address),[j]=(0,l.lr)(),S=j.get("dashboard"),v=(0,c.s0)();(0,n.useEffect)(()=>{b||v("/".concat(S?"?dashboard=".concat(S):""))},[b]);let y=[{name:"Scanning",status:a.SUCCESS},{name:"Double Checking",status:a.NOT_STARTED},{name:"Validating",status:a.NOT_STARTED},{name:"Brewing Coffee",status:a.NOT_STARTED},{name:"Almost there",status:a.NOT_STARTED},{name:"Ready for review",status:a.NOT_STARTED}],[N,w]=(0,n.useState)(),[C,k]=(0,n.useState)(y),resetStampsAndProgressState=()=>{w([]),k(y)},updateSteps=(e,t)=>{let s=[...C];if(t){s.slice(0,e).forEach(e=>e.status=a.SUCCESS),s[e-1].status=a.ERROR,k(s);return}s.slice(0,e).forEach(e=>e.status=a.SUCCESS),s[e]&&(s[e].status=a.IN_PROGRESS),k(s)},fetchValidPlatforms=async(e,t)=>{try{let s=0,incrementStep=()=>{s<4&&(updateSteps(++s),setTimeout(incrementStep,getStepDelay()))};incrementStep();let a=await fetchPossibleEVMStamps(e,t,r);return s=5,updateSteps(6),await new Promise(e=>setTimeout(e,300)),a}catch(e){throw console.log(e),Error("Error: ")}},handleFetchPossibleEVMStamps=async(e,t)=>{try{let s=await fetchValidPlatforms(e,t);w(s)}catch(e){throw console.log(e),Error()}};return(0,o.jsxs)(u.Z,{className:"text-color-2",children:[(0,o.jsxs)(m.Z,{children:[(0,o.jsx)("div",{className:"".concat(d.W5," bg-background"),children:(0,o.jsx)(i.Z,{className:"border-b border-foreground-6"})}),(0,o.jsx)(L.Z,{className:"flex justify-center",children:(f===h.QK.Idle||f===h.QK.FailedToConnect)&&"connected"===g?r&&r.stamps.length>0?(0,o.jsx)(WelcomeBack,{handleFetchPossibleEVMStamps:handleFetchPossibleEVMStamps,onOpen:t,resetStampsAndProgressState:resetStampsAndProgressState,dashboardCustomizationKey:S}):(0,o.jsx)(InitialWelcome,{onBoardFinished:async()=>{b&&(handleFetchPossibleEVMStamps(b,p),t())},dashboardCustomizationKey:S}):(0,o.jsx)(components_LoadingScreen,{})})]}),(0,o.jsx)(RefreshMyStampsModal,{steps:C,isOpen:e,onClose:s,validPlatforms:N,resetStampsAndProgressState:resetStampsAndProgressState,dashboardCustomizationKey:S})]})}}}]);